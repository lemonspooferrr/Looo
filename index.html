<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>LemonSpoofer - Appel WebRTC Spoof (Am√©lior√©)</title>
</head>
<body>
    <h1>üìû LemonSpoofer - Appel Spoof WebRTC (Micro activ√©)</h1>
    <p><b>Caller ID :</b> +33969353969</p>
    <p><b>Vers :</b> +33756836479</p>
    <button onclick="startCall()">‚úÖ Appeler</button>
    <p id="status"></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sip.js/0.20.0/sip.min.js"></script>
    <script>
        const status = document.getElementById("status");

        const userAgent = new SIP.UA({
            uri: 'testspoof123@sip.portsip.com',
            transportOptions: {
                wsServers: ['wss://sip.portsip.com:5063'],
                traceSip: true
            },
            authorizationUser: 'testspoof123',
            password: 'x6f89sPoof',
            displayName: '+33969353969'
        });

        userAgent.on('connected', () => status.innerText = "‚úÖ Connect√© au serveur SIP.");
        userAgent.on('disconnected', () => status.innerText = "‚ùå D√©connect√© du serveur SIP.");

        function startCall() {
            status.innerText = "üìû Appel en cours...";
            navigator.mediaDevices.getUserMedia({ audio: true }).then(() => {
                const target = 'sip:+33756836479@sip.portsip.com';
                const session = userAgent.invite(target, {
                    sessionDescriptionHandlerOptions: {
                        constraints: {
                            audio: {
                                echoCancellation: true,
                                noiseSuppression: true
                            },
                            video: false
                        },
                        peerConnectionOptions: {
                            rtcConfiguration: {
                                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
                            }
                        }
                    }
                });

                session.on('accepted', () => status.innerText = "‚úÖ Appel accept√© !");
                session.on('rejected', () => status.innerText = "‚ùå Appel rejet√©.");
                session.on('failed', () => status.innerText = "‚ùå √âchec de l'appel.");
                session.on('bye', () => status.innerText = "üì¥ Appel termin√©.");
            }).catch(error => {
                status.innerText = "‚ùå Autorisation micro refus√©e.";
                console.error("Micro refus√© :", error);
            });
        }
    </script>
</body>
</html>
