<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>ğŸ§ Test Micro + Audio Loopback - LemonSpoofer</title>
</head>
<body>
    <h1>ğŸ”Š Test Micro + Ã‰coute immÃ©diate (Loopback)</h1>
    <button onclick="startTest()">ğŸ§ Activer le micro</button>
    <p id="status" style="font-weight:bold;"></p>
    <audio id="audio" autoplay controls style="margin-top:20px;"></audio>

    <script>
        const status = document.getElementById("status");
        const audio = document.getElementById("audio");

        function log(msg) {
            status.innerText = msg;
            console.log("[DEBUG]", msg);
        }

        async function startTest() {
            log("ğŸ” Demande d'accÃ¨s au micro...");

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                const track = stream.getAudioTracks()[0];

                if (track) {
                    log("âœ… Micro actif : " + track.label);
                    audio.srcObject = stream;
                } else {
                    log("âš ï¸ Aucune piste audio dÃ©tectÃ©e.");
                }

            } catch (err) {
                log("âŒ Ã‰chec : " + err.name + " - " + err.message);
                console.error(err);
            }
        }
    </script>
</body>
</html>
